<div class="container-custom">
  <div class="img-recovery">
    <img src="https://supporme-fede.s3.sa-east-1.amazonaws.com/Selection.png" alt="Recuperaci√≥n de contrase√±a">
  </div>

  <div class="recovery-container">
    <div class="recovery-card">
      @if (!isSubmitted) {
        <h1 class="title">
          <span class="wave">üîê</span> Recuperar contrase√±a
        </h1>
        <p class="subtitle">Ingresa tu correo electr√≥nico y te enviaremos un enlace para restaurar tu contrase√±a</p>

        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="recovery-form">
          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
              </svg>
            </span>
            <input 
              type="email" 
              formControlName="email" 
              placeholder="Correo electr√≥nico" 
              class="form-input"
            >
          </div>

          @if(forgotPasswordForm.get('email')?.errors?.['required'] && forgotPasswordForm.get('email')?.touched) {
            <div class="error-message">El correo electr√≥nico es requerido</div>
          }

          @if(forgotPasswordForm.get('email')?.errors?.['email'] && forgotPasswordForm.get('email')?.touched) {
            <div class="error-message">Debe ingresar un correo electr√≥nico v√°lido</div>
          }

          @if(recoveryError) {
            <div class="error-message">{{ errorMessage }}</div>
          }

          <button type="submit" class="btn-continue" [disabled]="isLoading">
            @if(isLoading) {
              <span class="loader"></span>
              Enviando...
            } @else {
              Enviar enlace de recuperaci√≥n
            }
          </button>

          <div class="back-to-login">
            <a routerLink="/login">Volver al inicio de sesi√≥n</a>
          </div>
        </form>
      } @else {
        <div class="success-message">
          <span class="success-icon">‚úì</span>
          <h2 class="success-title">¬°Correo enviado!</h2>
          <p class="success-text">Si el correo electr√≥nico est√° registrado en nuestro sistema, recibir√°s un enlace para restablecer tu contrase√±a. Por favor revisa tu bandeja de entrada.</p>
          <button routerLink="home" class="btn-continue">Volver</button>
        </div>
      }
    </div>
  </div>
</div>