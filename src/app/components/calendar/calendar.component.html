<!-- Mostrar el rango seleccionado -->
<div class="date-range-wrapper">
  <div class="selected-range" (click)="toggleCalendar()">
    <span>{{ formatSelectedRange() }}</span>
    <i class="fa fa-calendar-alt"></i>
  </div>

  <!-- Popup del calendario -->
  <div class="calendar-popup" [class.open]="isCalendarOpen" (click)="calendarClick($event)">
    <div class="calendar-container">
      <!-- Rangos predefinidos (panel izquierdo) -->
      <div class="ranges-panel">
        <div class="range-option" (click)="selectRange('Hoy', $event)">Hoy</div>
        <div class="range-option" (click)="selectRange('Ayer', $event)">Ayer</div>
        <div class="range-option" (click)="selectRange('Esta semana', $event)">Esta semana</div>
        <div class="range-option" [class.active]="selectedRangeLabel === 'Últimos 7 días'" (click)="selectRange('Últimos 7 días', $event)">Últimos 7 días</div>
        <div class="range-option" (click)="selectRange('Últimos 30 días', $event)">Últimos 30 días</div>
        <div class="range-option" (click)="selectRange('Este mes', $event)">Este mes</div>
        <div class="range-option" (click)="selectRange('Mes pasado', $event)">Mes pasado</div>
        <div class="range-option" (click)="selectRange('Este año', $event)">Este año</div>
        <div class="range-option" (click)="selectRange('Año pasado', $event)">Año pasado</div>
      </div>

      <div class="calendar-panel">
        <!-- Calendario -->
        <div class="calendars-wrapper">
          <!-- Navegación -->
          <div class="month-navigation">
            <button class="month-nav prev" (click)="prevMonth($event)">
              <i class="fa fa-chevron-left"></i>
            </button>
            <button class="month-nav next" (click)="nextMonth($event)">
              <i class="fa fa-chevron-right"></i>
            </button>
          </div>
          
          <div class="calendars-container">
            <!-- Calendario actual -->
            <div class="month-calendar">
              <div class="month-header">{{ currentMonthTitle }}</div>
              <div class="weekdays-header">
                <div class="weekday" *ngFor="let day of weekdays">{{ day }}</div>
              </div>
              <div class="days-grid">
                <div class="day" 
                    *ngFor="let day of calendarDays" 
                    [class.other-month]="day.otherMonth"
                    [class.today]="day.isToday"
                    [class.selected]="day.isSelected"
                    [class.in-range]="day.inRange"
                    [class.range-start]="day.isRangeStart"
                    [class.range-end]="day.isRangeEnd"
                    [class.disabled]="day.otherMonth"
                    (click)="selectDay(day, $event)">
                  {{ day.dayNumber }}
                </div>
              </div>
            </div>
            
            <!-- Siguiente mes -->
            <div class="month-calendar">
              <div class="month-header">{{ nextMonthTitle }}</div>
              <div class="weekdays-header">
                <div class="weekday" *ngFor="let day of weekdays">{{ day }}</div>
              </div>
              <div class="days-grid">
                <div class="day" 
                    *ngFor="let day of nextMonthDays" 
                    [class.other-month]="day.otherMonth"
                    [class.today]="day.isToday"
                    [class.selected]="day.isSelected"
                    [class.in-range]="day.inRange"
                    [class.range-start]="day.isRangeStart"
                    [class.range-end]="day.isRangeEnd"
                    [class.disabled]="day.otherMonth"
                    (click)="selectDay(day, $event)">
                  {{ day.dayNumber }}
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Botones de acción -->
        <div class="action-buttons">
          <button class="btn-cancel" (click)="cancelSelection($event)">Cancelar</button>
          <button class="btn-apply" (click)="applySelection($event)">Aplicar</button>
        </div>
      </div>
    </div>
  </div>
</div>