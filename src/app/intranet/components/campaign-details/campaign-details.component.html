<div class="campaign-details-container" (click)="closeDropdown($event)">
  <!-- Mostrar cuando no hay campañas disponibles -->
  <div *ngIf="!campaigns || campaigns.length === 0" class="empty-state-container">
    <img src="https://supportme.site:9000/supporme/campaigns/assets/525a0370-d026-47fc-9b19-109c177b1127.jpg" alt="No hay campañas" class="empty-state-image">
    <h3 class="empty-state-title">Sin campañas disponibles</h3>
    <p class="empty-state-message">Actualmente no hay campañas para mostrar. ¡Cuando se creen nuevas campañas aparecerán aquí!</p>
  </div>

  <!-- Mostrar cuando hay campañas disponibles -->
  <div *ngIf="campaigns && campaigns.length > 0" class="campaign-selector-card">
    <div class="selector-header">
      <h2 class="selector-title">Detalle de Campaña</h2>
      
      <!-- Custom dropdown with logo -->
      <div class="custom-dropdown">
        <div class="dropdown-selected" (click)="toggleDropdown()">
          <img *ngIf="selectedCampaign?.logoUrl" [src]="selectedCampaign.logoUrl" class="campaign-logo" alt="Logo">
          <span class="campaign-name">{{ selectedCampaign?.name || 'Seleccionar campaña' }}</span>
          <span class="dropdown-arrow">▼</span>
        </div>
        
        <div class="dropdown-options" *ngIf="isDropdownOpen">
          @for (campaign of campaigns; track campaign.id) {
            <div class="dropdown-option" (click)="selectCampaign(campaign)">
              <img *ngIf="campaign.logoUrl" [src]="campaign.logoUrl" class="campaign-logo" alt="Logo">
              <span class="campaign-name">{{ campaign.name }}</span>
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Loading con skeleton -->
    <div *ngIf="loading" class="loading-content">
      <div class="skeleton-stats-row">
        <div class="skeleton-stat" *ngFor="let i of [1,2,3,4]">
          <div class="skeleton-title"></div>
          <div class="skeleton-value"></div>
        </div>
      </div>
      <div class="loading-overlay">
        <app-inline-loading-spinner [isLoading]="true"></app-inline-loading-spinner>
      </div>
    </div>
    
    <!-- Campaign statistics display -->
    <div class="campaign-stats-bar" *ngIf="!loading && campaignStatistic">
      <div class="stat-card">
        <div class="stat-title">Recaudado</div>
        <div class="stat-value">{{ campaignStatistic.income }}</div>
      </div>
      <!-- Mostrar la Meta solo si goal está definido -->
      <div class="stat-card" *ngIf="campaignStatistic.goal">
        <div class="stat-title">Meta</div>
        <div class="stat-value">{{ campaignStatistic.goal }}</div>
      </div>
      <div class="stat-card">
        <div class="stat-title">Donantes</div>
        <div class="stat-value">{{ campaignStatistic.donations }}</div>
      </div>
      <!-- Card para mostrar fecha de finalización si está definida -->
      <div class="stat-card" *ngIf="campaignStatistic.goalDate">
        <div class="stat-title">Fecha de finalización</div>
        <div class="stat-value">{{ campaignStatistic.goalDate | date:'dd/MM/yyyy' }}</div>
      </div>
    </div>
    
    <!-- Siempre mostrar el nombre de la campaña -->
    <div class="campaign-name-container" *ngIf="!loading && campaignStatistic && !campaignStatistic.goal">
      <div class="progress-info">
        <span>{{ selectedCampaign?.name }}</span>
      </div>
    </div>
    
    <!-- Campaign progress bar - solo mostrar si goal está definido -->
    <div class="campaign-progress-container" *ngIf="!loading && campaignStatistic && campaignStatistic.goal">
      <div class="progress-info">
        <span>{{ selectedCampaign?.name }}</span>
        <span>{{ (campaignStatistic.income / campaignStatistic.goal) * 100 | number:'1.2-2' }}%</span>
      </div>
      <div class="campaign-progress-bar">
        <div class="campaign-progress-value" [style.width.%]="(campaignStatistic.income / campaignStatistic.goal) * 100"></div>
      </div>
    </div>
  </div>
  <br>
  <!-- Charts Component -->
  <ng-container *ngIf="from && to && selectedCampaign?.id">
    <app-charts
      [from]="from"
      [to]="to"
      [campaignId]="selectedCampaign.id">
    </app-charts>
  </ng-container>
</div>  